# Getting started with GUAC Visualizer

## About

The GUAC Visualizer is an experimental utility that can be used to interact with
the GUAC services. It acts as a way to visualize the software supply chain graph
as well as a means to explore the supply chain, and prototype policies.

Since the GUAC Visaulizer is still in an early experimental stage, it is likely
that there may be some unexpected behavior or usage problems. For a more robust
use of GUAC, we recommend using the
[GraphQL interface directly](https://github.com/guacsec/guac/blob/main/demo/GraphQL.md).

## Requirements

### Tools

- npm
- yarn
- docker

### Services

The GUAC visualizer requires the running of the GUAC services. For more
information on how to do this, you may follow this
[setup](https://github.com/guacsec/guac/blob/main/docs/Compose.md).

## Getting started

If you already haven't, clone the GUAC visualizer repo. We highly suggest
cloning it in the same path as you clone the main
[GUAC repo](https://github.com/guacsec/guac).

```bash
git clone git@github.com:guacsec/guac-visualizer.git
```

Change directories into the repo.

```bash
cd guac-visualizer
```

All commands run throughout this guide should be in this working directory.

## Running the guac-visualizer from source

Install the guac-visualizer dependencies:

```bash
yarn install
```

The output should look like:

```
$ yarn install
yarn install v1.22.19
warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
[1/4] ðŸ”  Resolving packages...
[2/4] ðŸšš  Fetching packages...
warning Pattern ["@apollo/client@latest"] is trying to unpack in the same destination "/Users/lumb/Library/Caches/Yarn/v6/npm-@apollo-client-3.7.12-9ddd355d0788374cdb900e5f40298b196176952b-integrity/node_modules/@apollo/client" as pattern ["@apollo/client@^3.7.10"]. This could result in non-deterministic behavior, skipping.
[3/4] ðŸ”—  Linking dependencies...
warning "@graphql-codegen/cli > @graphql-tools/code-file-loader > @graphql-tools/graphql-tag-pluck > @babel/plugin-syntax-import-assertions@7.20.0" has unmet peer dependency "@babel/core@^7.0.0-0".
warning " > @graphql-codegen/typescript-react-apollo@3.3.7" has unmet peer dependency "graphql-tag@^2.0.0".
warning "cosmos-over-cytoscape > html-webpack-plugin@5.5.0" has unmet peer dependency "webpack@^5.20.0".
warning " > react-paginated-list@1.1.6" has incorrect peer dependency "react@>=16.8.25 <=16.13.1".
warning " > react-paginated-list@1.1.6" has incorrect peer dependency "react-dom@>=16.8.25 <= 16.13.1".
warning " > react-paginated-list@1.1.6" has incorrect peer dependency "styled-components@>=4.4.1 <= 5.1.1".
warning " > styled-components@5.3.9" has unmet peer dependency "react-is@>= 16.8.0".
[4/4] ðŸ”¨  Building fresh packages...
âœ¨  Done in 12.78s.
```

## Configuring the GraphQL endpoint

The application retrieves the GraphQL endpoint from the environment variable NEXT_PUBLIC_GRAPHQL_DESTINATION. You should set this variable before running the application. By default, if this variable is not set, it assumes that the GraphQL server is run on http://localhost:8080/query.

To change the GraphQL endpoint you can set the NEXT_PUBLIC_GRAPHQL_DESTINATION environment variable like this:

```bash
export NEXT_PUBLIC_GRAPHQL_DESTINATION=http://localhost:8080/query
```

Or, create a `.env.local` file in the project's root directory and set a value by adding a line in there like this:

```
NEXT_PUBLIC_GRAPHQL_DESTINATION=http://localhost:8080/query
```

You can then run the server (which will run by default on
`http://localhost:3000`)

```bash
yarn run dev
```

The ouput should look like:

```bash
$ yarn run dev

> guac-visualizer@0.1.0 dev
> next dev

ready - started server on 0.0.0.0:3000, url: http://localhost:3000
warn  - You have enabled experimental feature (appDir) in next.config.js.
warn  - Experimental features are not covered by semver, and may cause unexpected or broken application behavior. Use at your own risk.

info  - Thank you for testing `appDir` please leave your feedback at https://nextjs.link/app-feedback
(node:99525) ExperimentalWarning: stream/web is an experimental feature. This feature could change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
event - compiled client and server successfully in 1867 ms (560 modules)
```

## Accessing the server

You can access the server easily through a web browser and navigating to
http://localhost:3000. The page will look like the following:

![ui](https://user-images.githubusercontent.com/3060102/233406051-486f4f88-2779-4abf-9d5f-adb98bf51c3a.png)

For more information on how to use the GUAC visualizer, take a look at some of
our [GUAC demos](https://github.com/guacsec/guac/blob/main/demos/).
